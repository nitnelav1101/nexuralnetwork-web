{% extends "layout.html" %} {% block content %}

<div class="trainingStatsPage">
{{ htmlPage }}
</div>

<script>
    $(document).ready(function() {
        var isTrainingDone =  false;

        function updateTrainingPage() {
            updatePageQueryUrl = "/services/UpdateTrainingPage/{{ projectName }}/{{ trainingName }}/json";
            checkTrainingStatusQueryUrl = "/services/isTrainingDone/{{ projectName }}/{{ trainingName }}";

            $.ajax({
                type: 'GET',
                cache: false,
                url: checkTrainingStatusQueryUrl, 
                success: function(resp){
                    // alert(resp.data);
                    if(resp.data == false) {
                        $.ajax({
                            type: 'GET',
                            cache: false,
                            url: updatePageQueryUrl, 
                            success: function(resp){
                                $('.trainingStatsPage').empty();
                                $('.trainingStatsPage').html(resp.data);
                                // alert("adas");
                            }
                        });
                    }
                }
            });
        }

        setInterval(updateTrainingPage, 3000);
    }); 
</script>

{% endblock %}